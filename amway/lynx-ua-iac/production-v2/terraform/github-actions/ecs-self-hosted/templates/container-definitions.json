[
  {
    "essential": false,
    "image": "${init_image}",
    "name": "init-actions",
    "cpu": 0,
    "memoryReservation": 64,
    "environment": [
      {
        "name": "GIT_ORG",
        "value":"${git_org}"
      },
      {
        "name": "GIT_REPO",
        "value":"${git_repo}"
      },
      {
        "name": "GIT_TOKEN",
        "value": "${git_token}"
      },
      {
        "name": "AWS_DEFAULT_REGION",
        "value": "eu-central-1"
      }
    ],
    "mountPoints": [],
    "volumesFrom": [],
    "privileged": null
  },
  {
    "essential": true,
    "dependsOn": [
      {
        "containerName": "init-actions",
        "condition": "SUCCESS"
      }
    ],
    "image": "${runner_image}",
    "name": "actions-runner",
    "cpu": 0,
    "memoryReservation": ${runner_memory_soft},
    "memory": ${runner_memory_hard},
    "environment": [
      {
        "name": "GIT_ORG",
        "value": "${git_org}"
      },
      {
        "name": "GIT_REPO",
        "value": "${git_repo}"
      },
      {
        "name": "AWS_DEFAULT_REGION",
        "value": "eu-central-1"
      },
      {
        "name": "LABELS",
        "value": "${labels}"
      },
      {
        "name": "MACHINE_AZ",
        "value": "${dm_az}"
      },
      {
        "name": "MACHINE_DURATION",
        "value": "${dm_block_duration}"
      },
      {
        "name": "MACHINE_TYPE",
        "value": "${dm_instance_type}"
      },
      {
        "name": "MACHINE_VPC_ID",
        "value": "${dm_vpc_id}"
      },
      {
        "name": "MACHINE_REGION",
        "value": "${dm_region}"
      },
      {
        "name": "MACHINE_SUBNET",
        "value": "${dm_subnet_id}"
      },
      {
        "name": "MACHINE_SG_NAME",
        "value": "${dm_security_group}"
      },
      {
        "name": "MACHINE_IS_SPOT",
        "value": "${dm_is_spot}"
      },
      {
        "name": "SONAR_URL",
        "value": "${sonar_url}"
      }
    ]
  }
]
