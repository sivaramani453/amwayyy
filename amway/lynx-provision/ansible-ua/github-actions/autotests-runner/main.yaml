---
# Apply common configuration
- hosts: "all"
  remote_user: "centos"

  # Just to make things easy
  pre_tasks:
    - name: Disable Selinux
      become: True
      selinux:
        state: "disabled"

    - name: Update and install tools
      include_tasks: prepare.yaml

  roles:
    - role: "../../roles/github-actions/github-runner"
      tags:
        - github

    - role: "../../roles/lean_delivery.java"
      tags:
        - java

    - role: "../../roles/gantsign.maven"
      tags:
        - java

    - role: "../../roles/github-actions/autotest-agent"
      become: True
      tags:
        - autotests

    - role: '../../roles/lean_delivery.docker'
      vars:
        docker_version: "18.09.2"
        docker_users:
          - github
          - centos
      tags:
        - docker
