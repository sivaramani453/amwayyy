---
- name: Install packages and python modules
  become: true
  block:
    - name: Update All Packages
      yum:
        name: "*"
        state: "latest"
    
    # - name: Install amazon-linux-extras packages
    #   shell: "amazon-linux-extras install {{ item }}"
    #   loop: "{{ amazon_packages }}"

    - name: Install useful tools
      yum:
        name: "{{ item }}"
        state: present
      loop: "{{ install_packages }}"

    - name: Install pip packages
      pip:
        name: "{{ item }}"
        executable: "pip3"
      loop: "{{ install_pip_modules }}"

    # - name: Install selinux for python
    #   shell: pip install selinux
